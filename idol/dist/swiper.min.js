define("./app",["../lib/glue.min","./component/dialog/PopupDialog","./component/dialog/LoadingDialog","./component/mask/Mask","./component/draw/DrawButton","./component/draw/Shake","./component/draw/Turntable","./component/draw/DrawPanel","./component/draw/Speeddial","./component/draw/Slotmachines","./component/button/InfoButton","./component/button/ChargeButton","./component/button/ShareButton","./component/button/LoginGroup","./component/button/ShowAllGroup","./component/carousel/Carousel","./component/carousel/PictureViewer","./component/carousel/Prizer","./component/carousel/CommonPrizer","./component/date/Countdown","./component/composite/PhoneForm","./behavior/NoLogin","./behavior/Reserve","./behavior/Dialog"],function(e,t,n){e("../lib/glue.min"),e("./component/dialog/PopupDialog"),e("./component/dialog/LoadingDialog"),e("./component/mask/Mask"),e("./component/draw/DrawButton"),e("./component/draw/Shake"),e("./component/draw/Turntable"),e("./component/draw/DrawPanel"),e("./component/draw/Speeddial"),e("./component/draw/Slotmachines"),e("./component/button/InfoButton"),e("./component/button/ChargeButton"),e("./component/button/ShareButton"),e("./component/button/LoginGroup"),e("./component/button/ShowAllGroup"),e("./component/carousel/Carousel"),e("./component/carousel/PictureViewer"),e("./component/carousel/Prizer"),e("./component/carousel/CommonPrizer"),e("./component/date/Countdown"),e("./component/composite/PhoneForm"),e("./behavior/NoLogin"),e("./behavior/Reserve"),e("./behavior/Dialog"),window.deviceInfo={},window.iqiyi&&window.navigator.userAgent.indexOf("IqiyiApp")>=0?iqiyi.ready(function(e){e?iqiyi.init(function(e){window.deviceInfo=e.data||{},glue.init()}):glue.init()}):glue.init()}),define("../lib/glue.min",[],function(e,t,n){window.glue={},function(){function e(e){function t(){l(this,this.self.$attribute)}return t.$className=e,t}function t(t,i){var o=e(t);return(o.prototype={}).self=o,o.$attribute={},n(o,i,!0,!0),o}function n(e,t,i,o){var a=i?e.prototype:e;t=t||{};for(name in t)if(t.hasOwnProperty(name)){var r=t[name];if("static"==name){n(e,r);continue}if("function"==typeof r)r.$owner=e,r.$name=name;else if(o){e.$attribute[name]=r;continue}a[name]=r}}function o(e,t){if(!t)return null;for(var n=e,i=t.split(".");t=i.shift();)if(!(n=n[t]))return null;return n}function a(e,t,n){if(t&&n){for(var i=e,o=t.split("."),a=o.length-1,r=0;r<a;r++)t=o[r],i[t]||(i[t]={}),i=i[t];return i[o[a]]=n}}function r(e,t){if(t){for(var n=e,i=t.split("."),o=i.length-1,a=0;a<o;a++){if(t=i[a],!n[t])return;n=n[t]}delete n[i[o]]}}function s(e){return l(e,e.self.$attribute),Object.create?Object.create(e):function(e){var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}(e)}function l(e,t){return glue.$.extend(!0,e,t)}function d(e,t){var n=s(t.prototype);glue.$.extend(!0,n,e.prototype),e.prototype=n,e.superclass=t.prototype}function u(e,t){return e=e||"",t=t||[],0==t.length?"":e.replace(/\{(\d+)\}/g,function(){return t[arguments[1]]||""})}function c(){throw u(glue.ERROR_FORMAT,arguments)}function g(e,t){return e.find("[glue-"+t+"],[data-"+t+"]")}function f(e,t){return e.parents("[glue-"+t+"],[data-"+t+"]")}function p(e,t){return e.attr("glue-"+t)||e.attr("data-"+t)}function m(e,t){var n=e.replace(/,/g,";").split(";");for(var i in n)e=o(glue.BEHAVIORS,glue.$.trim(n[i])),"function"==typeof e?e.call(t):"object"==typeof e&&"function"==typeof e.init&&e.init.call(t)}function h(){for(glue.isReady=!0;fn=glue.readyCall.shift();)fn.call();for(i in glue.readyMsg){var e=glue.readyMsg[i];glue.postMessage(e.name,e.data)}}glue.COMPONENTS={},glue.COMPS={},glue.OBJ_POINTER=[],glue.SERVICES={},glue.BEHAVIORS={},glue.$=window.jQuery||window.Zepto,glue.idSeed=0,glue.isReady=!1,glue.readyCall=[],glue.readyMsg=[],glue.debug=!1,glue.console=window.console||{log:function(e){alert(e)}},glue.ERROR_FORMAT="error: {0} [name={1}] {2}",glue.DUPLICATED_DEFINE="duplicated define component",glue.DUPLICATED_CREATE_COMPONENT="duplicated create component",glue.DUPLICATED_CREATE_SERVICE="duplicated create service",glue.DUPLICATED_CREATE_BEHAVIOR="duplicated create behavior",glue.INIT_COMPONENT_ERROR="init component failed",glue.GET_COMPS_ERROR="get comps failed",glue.INVALID_DATA="invalid data",glue.NAMEOFSERVICE="SERVICE";var v=t("Model",{static:{getInstance:function(e){return(new v).init(e)}},fields:null,component:null,init:function(e){return this.component=e,this},updateModel:function(){this.fields={};var e=this.component.rootElement,t=e.clone();g(t,"component").remove();for(var n=t.prop("outerHTML"),i=/(\S+)="[^="]*?\{\{(.*?)\}\}.*?"|(glue-bind)="(.*?)"/gi,o={},a=i.exec(n);a;){if(!o[a[0]]){o[a[0]]=!0;var r=a[1]||a[3],s=glue.$.trim(a[2]||a[4]),l="class"==r?"style":"glue-bind"==r?"value":"attribute",d=e.find("["+a[0]+"]");this.fields[s]={node:0==d.length?e:d,type:l,name:r,value:""}}a=i.exec(n)}},updateField:function(e){this.fields.length;for(var t in this.fields){var n=this.fields[t],i=o(e,t);i&&i!=n.value&&("style"==n.type?n.node.removeClass("{{"+t+"}}").removeClass(n.value).addClass(i):"attribute"==n.type?n.node.attr(n.name,i):"value"==n.type&&n.node.html(i),n.value=i)}},update:function(e){glue.$.isPlainObject(e)||c(glue.INVALID_DATA,"not a plain object"),this.updateField(e)}}),b=glue.COMPONENTS.Base=t("Base",{autoInit:!0,rootElement:null,nodes:null,listeners:null,messages:null,init:function(){},bindEvent:function(){var e=this,t=this.listeners||{};for(var n in t){var i=null;(i=t[n])&&"function"==typeof i&&e.addDomListener(n,function(t){for(var n=p(e.rootElement,"node-ref"),o=glue.$(t.target);e!=o.prop("owner")&&!p(o,"node")&&!p(o,"type");){if(n&&(n=glue.$.trim(n))&&(o.prop("tagName").toLowerCase()==n.toLowerCase()||o.hasClass(n))){o.$ref=!0;break}o=o.parent()}i.call(e,t,o,p(o,"node")||p(o,"type")||o.$ref&&n||null)})}},destroy:function(){glue.destroy(this.id)},onMessage:function(e,t){},callParent:function(e){var t=this.callParent.caller;return t.$owner.superclass[t.$name].apply(this,e||[])},updateComponentNodes:function(){var e=this,t=g(e.rootElement,"node").toArray().filter(function(t){return f(glue.$(t),"component")[0]==e.rootElement[0]});e.nodes={};for(var n=t.length,i=0;i<n;i++){var o=glue.$(t[i]);e.nodes[p(o,"node")]=o}},updateNodes:function(e){this.updateComponentNodes(),this.model.updateModel(),glue.initComponent(this.rootElement,e)}}),y=glue.COMPONENTS.Event=t("Event",{addDomListener:function(e,t,n){var i=this.rootElement;return window.jQuery?i.delegate.apply(i,arguments):i.on.apply(i,arguments),this},removeDomListener:function(e,t,n){var i=this.rootElement;return window.jQuery?i.undelegate.apply(i,arguments):i.off.apply(i,arguments),this}});!function(e,t){glue.$.extend(!0,e.prototype,t.prototype),e.prototype.self=e,e}(b,y),glue.define=function(e,n){var i=o(glue.COMPONENTS,e);return i?(c(glue.DUPLICATED_DEFINE,e),null):(n=n||{},i=t(e,n),d(i,o(glue.COMPONENTS,"Base")),a(glue.COMPONENTS,e,i),i)},glue.create=function(e,t){var i=p(e,"component"),r=o(glue.COMPONENTS,i);if(r){var s=o(glue.COMPS,p(e,"id"));if(s&&s.rootElement!=e&&(s.destroy(),s=null),s)c(glue.DUPLICATED_CREATE_COMPONENT,i),r=null;else{r=new r,n(r,t||{});var l=p(e,"id")||e.attr("id")||i+"_"+glue.idSeed++;r.id=l,e.attr("glue-id",l),a(glue.COMPS,l,r),glue.OBJ_POINTER.push(r),e.prop("owner",r),r.rootElement=e,r.model=v.getInstance(r),r.updateNodes()}}return r},glue.destroy=function(e){var t=o(glue.COMPS,e);if(t){t.rootElement.remove(),r(glue.COMPS,e);for(var n=glue.OBJ_POINTER.length,i=0;i<n;i++)if(glue.OBJ_POINTER[i]==t){glue.OBJ_POINTER.splice(i,1);break}}else c(glue.GET_COMPS_ERROR,e)},glue.getComponentInstance=function(e){return"string"!=typeof e&&(e=p(glue.$(e),"id")||glue.$(e).attr("id")),o(glue.COMPS,e)},glue.createService=function(e){if(0==arguments.length)return null;var t=glue.NAMEOFSERVICE+glue.idSeed++;if(e=e||{},t&&!o(glue.SERVICES,t)){var i={};return n(i,e||{}),a(glue.SERVICES,t,i),i}return c(glue.DUPLICATED_CREATE_SERVICE,t),null},glue.createBehavior=function(e,t){t&&(e&&!o(glue.BEHAVIORS,e)?(a(glue.BEHAVIORS,e,t),"object"==typeof t&&glue.OBJ_POINTER.push(t)):c(glue.DUPLICATED_CREATE_BEHAVIOR,e))},glue.postMessage=function(e,t){if(!glue.isReady)return void glue.readyMsg.push({name:e,data:t});e=e instanceof Array?e:[e];for(var n=glue.OBJ_POINTER.length,i=0;i<n;i++){var o=glue.OBJ_POINTER[i];if(o.message instanceof Array&&o.onMessage)for(var a in e)o.message.indexOf(e[a])>=0&&o.onMessage(e[a],t)}},glue.ready=function(e){glue.isReady?e.call():"function"==typeof e&&glue.readyCall.push(e)},glue.initComponent=function(e,t){e=glue.$(e),t=t||{};for(var n=g(e,"component"),i=n.length,o=0;o<i;o++){var a=glue.$(n[o]),r=a.prop("owner");if(r||(r=glue.create(a,t[p(a,"id")])),r&&!r.$init){if(r.autoInit)if(glue.debug)r.init();else try{r.init()}catch(e){c(glue.INIT_COMPONENT_ERROR,p(a,"component"),e.message)}r.bindEvent(),r.$init=!0;var s=p(a,"behavior");s&&m(s,r)}}},glue.init=function(e){glue.$(document).ready(function(){e=e||{},glue.debug=!!e.debug,delete e.debug,glue.initComponent(glue.$("body"),e),h()})}}(glue)}),define("./component/dialog/PopupDialog",["../../../lib/glue.min","./feature/common","./feature/again","./feature/submit","./feature/link","./feature/bind","./feature/charge","./feature/pay"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.dialog.PopupDialog",{message:["POPUPDIALOG_SHOW","POPUPDIALOG_REMOVE"],onMessage:function(e,t){if("POPUPDIALOG_SHOW"==e){var n=t.dataCodeSend+t.code;this.show(n,t)}else if("POPUPDIALOG_REMOVE"==e){var i=glue.$("[data-dialog=dialog]");i.remove()}},init:function(){this.features={common:e("./feature/common"),again:e("./feature/again"),submit:e("./feature/submit"),link:e("./feature/link"),bind:e("./feature/bind"),charge:e("./feature/charge"),pay:e("./feature/pay")}},show:function(e,t){var n=this,i=null;if("Q00703"==t.code){var o=t.data.daysurpluschance;o&&(o=parseInt(o)>0?1:0);var a=t.dataCodeSend+t.code+o;i=glue.$('[data-vipactive-tpl="'+a+'"]')}else if("A00000"==t.code){var r=t.data.gifttype,a=t.dataCodeSend+t.code+r;i=glue.$('[data-vipactive-tpl="'+a+'"]')}else if("Q00382"==t.code){var s=t.data.conditionId,a=t.dataCodeSend+t.code+s;i=glue.$('[data-vipactive-tpl="'+a+'"]')}if(i&&0!=i.length||(i=glue.$('[data-vipactive-tpl="'+e+'"]'),0!=i.length)){var l=n.features[i.attr("data-feature")||"common"];l&&(i=Mustache.render(glue.$(i[0]).text(),t.data),i=glue.$("body").append(i).children().last(),i.attr("data-dialog","dialog"),l.init(i,t))}else if("Q00901"==t.code||"Q00902"==t.code){var d=t.data.redirect_url||"",u=d.match(/^fn:(.*)/);u&&(u=window[u[1]])?"function"==typeof u&&u.call():window.location.href=d}}})}),define("./component/dialog/feature/common",["../../../../lib/glue.min"],function(e,t,n){e("../../../../lib/glue.min"),n.exports={init:function(e,t){e.find("a").on("click",function(n){e.remove(),glue.postMessage("MASK_HIDE");var i=$(n.target).attr("data-next-dialog");i&&(n.preventDefault(),glue.postMessage("POPUPDIALOG_SHOW",{dataCodeSend:t.dataCodeSend,code:i}))}),glue.postMessage("MASK_SHOW"),"Q00901"==t.code&&e.find("a.btn-confirm").attr("href",t.data.redirect_url),e.css("display","block")}}}),define("./component/dialog/feature/again",["../../../../lib/glue.min"],function(e,t,n){e("../../../../lib/glue.min"),n.exports={init:function(e,t){e.find("a").on("click",function(n){e.remove(),glue.postMessage("MASK_HIDE"),glue.$(n.target).hasClass("ff-close")||glue.postMessage("DRAW_AGAIN",{code:t.dataCodeSend})}),glue.postMessage("MASK_SHOW"),e.css("display","block")}}}),define("./component/dialog/feature/submit",["../../../../lib/glue.min","../../../service/remote/remote","../../../service/user/user"],function(e,t,n){e("../../../../lib/glue.min");var i=e("../../../service/remote/remote"),o=e("../../../service/user/user");n.exports={init:function(e,t){var n=this;e.find("a").on("click",function(i){if(glue.$(i.target).hasClass("ff-close"))return e.nodes.cover.length>0?void e.nodes.cover.css("display","block"):(e.remove(),void glue.postMessage("MASK_HIDE"));glue.$(i.target).attr("glue-node")||n.submit(e,t.dataCodeGet,t.dataCodeSend)}),e.find('[data-vipyes-elem="error"]').css("display","block"),glue.postMessage("MASK_SHOW"),n.owner=e,e.nodes={uname:e.find('[glue-node="name"]'),mobile:e.find('[glue-node="phone"]'),dz:e.find('[glue-node="address"]'),errorMsg:e.find('[glue-node="errorMsg"]'),cover:e.find('[glue-node="cover"]'),cancel:e.find('[glue-node="cancel"]'),goon:e.find('[glue-node="continue"]'),clear:e.find('[glue-node="clear"]')},e.nodes.cover.length>0&&(e.nodes.cancel.on("click",function(){e.nodes.cover.css("display","none"),e.remove(),glue.postMessage("MASK_HIDE")}),e.nodes.goon.on("click",function(t){e.nodes.cover.css("display","none")})),e.nodes.uname.length>0?e.css("display","block"):o.getUserInfo(function(t){if(null!=t){var n=t.userinfo.phone;e.nodes.mobile.val(n||"")}e.css("display","block")}),e.nodes.clear.length>0&&e.nodes.clear.on("click",function(){e.nodes.mobile.val("")})},submit:function(e,t,n){var o=this,a=o.owner.nodes;a.errorMsg.css("display","none");var r={};for(var s in a)if(a.hasOwnProperty(s)){if("errorMsg"==s||"cover"==s||"cancel"==s||"goon"==s||"clear"==s||0==a[s].length||"none"==a[s].css("display"))continue;var l=glue.$.trim(a[s].val()||a[s].text());if(""==l)return a.errorMsg.text("不能有空值"),void a.errorMsg.css("display","block");if("mobile"==s&&(11!=l.length||!l.match(/^1[34578]\d{9}$/)))return a.errorMsg.text("手机号码有误"),void a.errorMsg.css("display","block");r[s]=l}r.mobile&&i.send(t,r,function(n){"A00000"==n.code?(n.dataCodeSend=t,e.remove(),glue.postMessage("MASK_HIDE"),glue.postMessage("POPUPDIALOG_SHOW",n)):(a.errorMsg.text(n.msg),a.errorMsg.css("display","block"))})}}}),define("./service/remote/remote",["../../../lib/glue.min","../pingback/pingback"],function(e,t,n){e("../../../lib/glue.min");var i=e("../pingback/pingback");n.exports=glue.createService({send:function(e,t,n){t=t||{};var o="https://act.vip.iqiyi.com/api/process-jsonp.action?pid=97ae2982356f69d8&cid=afbe8fd3d73448c9",a=null;if("string"==typeof e)t.interfaceCode=e,a=e,i.sendPingback("vipmarketing_"+e);else{if("object"!=typeof e||!e.url)return;o=e.url,e.interfaceCode&&(a=e.interfaceCode,t.interfaceCode=a,i.sendPingback("vipmarketing_"+a))}t.dfp=window.deviceInfo.dfp||"",t.deviceID=window.deviceInfo.qyID||"",glue.$.ajax({url:o,dataType:"jsonp",data:t,success:function(t){a&&(e=t.data?t.data.code:t.code,i.sendPingback("vipmarketing_"+a+"_"+e)),"function"==typeof n&&n.call(null,t.data&&t.data.code?t.data:t)},error:function(e,t){}})}})}),define("./service/pingback/pingback",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),n.exports=glue.createService({send:function(e,t){var n=[];for(var i in e)n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));var o=new Image;t=t||"//msg.video.qiyi.com/jpb.gif",o.src=t+"?"+n.join("&")},sendPingback:function(e){this.send({t:20,pf:2,p:20,p1:201,rseat:e,u:this.get_uid(),pu:this.get_ppuid(),rn:(new Date).getTime()},"//msg.iqiyi.com/b")},get_uid:function(){var e=glue.$.cookie.get("QC006");return e||(e="u"+(new Date).getTime(),glue.$.cookie.set("QC006",e,{expires:31536e6,path:"/",domain:"iqiyi.com"})),e},get_ppuid:function(){return JSON.parse(glue.$.cookie.get("P00002")||"{}").uid||""}})}),define("./service/user/user",["../../../lib/glue.min","../pingback/pingback"],function(e,t,n){e("../../../lib/glue.min");var i=e("../pingback/pingback");n.exports=glue.createService({isLogin:function(e){if(!glue.$.cookie.get("P00001")){var t=this;return e?(i.sendPingback("vipmarketing_"+e),setTimeout(function(){t.login()},500)):t.login(),!1}return!0},login:function(){var e=window.navigator.userAgent;e.indexOf("IqiyiApp/iqiyichild")>=0||e.indexOf("qiyichild")>=0?window.location.href="iqiyichildweb://gotologinview":e.indexOf("IqiyiApp")>=0?window.location.href="iqiyi://login":window.location.href="//m.iqiyi.com/user.html?onestepoff=1&redirect_url="+encodeURIComponent(window.location.href)},logout:function(){window.location.href="//passport.iqiyi.com/user/logout.php?authcookie="+glue.$.cookie.get("P00001")+"&agenttype=5&url="+encodeURIComponent(window.location.href)},getUserInfo:function(e){"function"==typeof e&&glue.$.ajax({type:"POST",url:"https://passport.iqiyi.com/apis/user/info.action?authcookie="+glue.$.cookie.get("P00001"),dataType:"json",crossDomain:!0,beforeSend:function(e,t){e.withCredentials=!0},data:window.deviceInfo.qyID||null,success:function(t){e("A00000"==t.code?t.data:null)},error:function(t,n){e(null)}})}})}),define("./component/dialog/feature/link",["../../../../lib/glue.min"],function(e,t,n){e("../../../../lib/glue.min"),n.exports={init:function(e,t){var n=e.attr("href")||e.find("a").attr("href");n&&(window.location.href=n)}}}),define("./component/dialog/feature/bind",["../../../../lib/glue.min","../../../service/remote/remote"],function(e,t,n){e("../../../../lib/glue.min");var i=e("../../../service/remote/remote");n.exports={init:function(e,t){var n=this;e.find("a").on("click",function(i){if(glue.$(i.target).hasClass("ff-close"))return e.remove(),void glue.postMessage("MASK_HIDE");glue.$(i.target).attr("glue-node")||n.bind(e,t.dataCodeGet,t.dataCodeSend)}),glue.postMessage("MASK_SHOW"),n.isThirdAccount()||e.find('[glue-node="password"]').parent("li").css("display","none"),e.css("display","block"),n.owner=e,e.nodes={phone:e.find('[glue-node="phone"]'),errorMsg:e.find('[glue-node="errorMsg"]'),password:e.find('[glue-node="password"]'),validCode:e.find('[glue-node="validCode"]'),validButton:e.find('[glue-node="validButton"]'),vCode:e.find('[glue-node="vCode"]'),vButton:e.find('[glue-node="vButton"]')},e.nodes.validButton.one("click",n.getValid.bind(n)),n.getCode()},getCode:function(){var e=this,t=e.owner,n="https://passport.iqiyi.com/apis/register/vcode.action?width="+parseInt(t.nodes.vButton.width())+"&static=1&timestamp="+(new Date).getTime();t.nodes.vButton.attr("src",n),setTimeout(function(){t.nodes.vButton.one("click",e.getCode.bind(e))},500)},isThirdAccount:function(){var e=null,t="",n=glue.$.cookie.get("P00002");if(n){e=JSON.parse(n),t=e.email;if(/^[0-9a-zA-Z_][-_\.0-9a-zA-Z-]{0,31}@([0-9a-zA-Z][0-9a-zA-Z-]*\.)+[a-zA-Z]{2,4}$/.test(t.trim()))return!1}return!0},getValid:function(){var e=this,t=e.owner,n=glue.$.trim(t.nodes.phone.val()),o=glue.$.trim(t.nodes.vCode.val()),a=t.nodes.errorMsg,r=t.nodes.validButton;if(a.css("display","none"),11==n.length&&n.match(/^1[34578]\d{9}$/))if(""==o)a.text("图文验证码有误"),a.css("display","block"),r.one("click",e.getValid.bind(e));else{var s={requestType:3,cellphoneNumber:n,serviceId:2,vcode:o};i.send({url:"https://passport.iqiyi.com/apis/phone/send_cellphone_authcode_vcode.action"},s,function(t){"A00000"==t.code?e.lastPhone=n:(a.text(t.msg),a.css("display","block")),r.html("<span>60</span>秒后重试");var i=r.find("span"),o=60,s=setInterval(function(){if(o<=0)return r.text("获取验证码"),r.one("click",e.getValid.bind(e)),void clearInterval(s);o--,i.text(o)},1e3)})}else a.text("手机号码有误"),a.css("display","block"),r.one("click",e.getValid.bind(e))},bind:function(e,t,n){var o=this;if(!o.flag){o.flag=!0;var a=o.owner,r=glue.$.trim(a.nodes.phone.val()),s=glue.$.trim(a.nodes.validCode.val()),l=glue.$.trim(a.nodes.password.val()),d=a.nodes.errorMsg;if(d.css("display","none"),11==r.length&&r.match(/^1[34578]\d{9}$/))if(o.lastPhone&&r!=o.lastPhone)d.text("与接收验证码的手机号码不同"),d.css("display","block"),o.flag=!1;else if(""==s)d.text("请输入验证码"),d.css("display","block"),o.flag=!1;else if(""==l&&o.isThirdAccount())d.text("密码不能为空"),d.css("display","block"),o.flag=!1;else{var u=RSAUtils.getKeyPair("10001","","ab86b6371b5318aaa1d3c9e612a9f1264f372323c8c0f19875b5fc3b3fd3afcc1e5bec527aa94bfa85bffc157e4245aebda05389a5357b75115ac94f074aefcd"),c={authCode:s,authcookie:glue.$.cookie.get("P00001"),cellphoneNumber:r,serviceId:2,agenttype:o.getAgentType(),requestType:3,passwd:RSAUtils.encryptedString(u,encodeURIComponent(l)).replace(/\s/g,"-")};i.send({url:"https://passport.iqiyi.com/apis/phone/direct_bind_phone.action"},c,function(t){"A00000"==t.code?(e.remove(),glue.postMessage("MASK_HIDE"),glue.postMessage("DRAW_AGAIN",{code:n})):(d.text(t.msg),d.css("display","block"))}),o.flag=!1}else d.text("手机号码有误"),d.css("display","block"),o.flag=!1}},getAgentType:function(){var e=navigator.userAgent.toLowerCase(),t="iphone"==e.match(/iphone/i),n="ipad"==e.match(/ipad/i),i="android"==e.match(/android/i);return t?12:n?10:i?13:0}}}),define("./component/dialog/feature/charge",["../../../../lib/glue.min","../../../service/charge/charge"],function(e,t,n){e("../../../../lib/glue.min");var i=e("../../../service/charge/charge");n.exports={init:function(e,t){e.find("a").on("click",function(t){e.remove(),glue.postMessage("MASK_HIDE"),glue.$(t.target).hasClass("ff-close")||i.doCharge(null,glue.$(t.target).attr("data-param")||"")}),glue.postMessage("MASK_SHOW"),e.css("display","block")}}}),define("./service/charge/charge",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),n.exports=glue.createService({doCharge:function(e,t){var n=this,i=n.getType(),o=n.getVersion(),a=n.getQueryString("share"),r=e||"//serv.vip.iqiyi.com/order/preview.action?pid=a0226bd958843452";r.indexOf("?")<0&&(r+="?_="+(new Date).getTime());var s=navigator.userAgent.toLowerCase(),l="iphone"==s.match(/iphone/i),d="ipad"==s.match(/ipad/i),u="android"==s.match(/android/i);if(t=""!=t?"&"+t:t,t.indexOf("fc")<0){var c=n.getQueryString("fc");null!=c?t+="&fc="+c:(c=$.cookie.get("QC009"),t+=""!=c?"&fc="+c:"")}null==a&&(l||d||u)&&o&&i?(o=parseFloat(o),"pps"==i?u&&o>=3.8?r="iqiyi-phone://tv.pps.mobile/res?pid=6"+t:(l||d)&&(r=o>=4?"pps-uni://com.qiyi.video/res?pid=6&page=list"+t:"//vip.iqiyi.com/viperrorinfoh5.html"):"iqiyi"==i?l&&o>=6.5?r="iqiyi-phone://com.qiyi.video/res?pid=6&page=list"+t:d&&o>=6.5?r="iqiyi-pad://com.qiyi.video/res?pid=6&page=list"+t:u&&o>=6?r="iqiyi-phone://com.qiyi.video/res?pid=6"+t:(l||d)&&(r="//vip.iqiyi.com/viperrorinfoh5.html"):"iqiyichild"==i&&(r="iqiyichildweb://vippay"+(t.length>0?"?"+t.substring(1):""))):(r+=r.indexOf("fc")<0?t:"",n.setFv()),window.location.href=r},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},getType:function(){var e=this.getQueryString("type");if(!e){var t=window.navigator.userAgent,n=t.match(/IqiyiApp\/(\S*)/);n?e=n[1]:t.indexOf("qiyichild")>=0&&(e="iqiyichild")}return e||"iqiyi"},getVersion:function(e){var t=this.getQueryString("version");if(!t){var n=window.navigator.userAgent,i=n.match(/IqiyiVersion\/(\S*)/);i&&(t=i[1])}return t||null},setFv:function(){var e=this.getQueryString("fv");null!=e&&(e=encodeURI(e).substr(0,146),$.cookie.set("QC142",e,{path:"/",domain:".iqiyi.com",expires:2592e5}))}})}),define("./component/dialog/feature/pay",["../../../../lib/glue.min"],function(e,t,n){e("../../../../lib/glue.min"),n.exports={init:function(e,t){e.find("a").on("click",function(t){if(e.remove(),glue.postMessage("MASK_HIDE"),!glue.$(t.target).hasClass("ff-close")){var n=$(t.target).attr("data-href");n+=n.indexOf("?")>=0?"&":"?",location.href=n+glue.$.url.getQueryValue(location.href,"fv")}}),glue.postMessage("MASK_SHOW"),"micromessenger"!=window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?e.find("#weixinpay").remove():e.find("#alipay").remove(),e.css("display","block")}}}),define("./component/dialog/LoadingDialog",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.dialog.LoadingDialog",{message:["LOADINGDIALOG_SHOW","LOADINGDIALOG_HIDE"],onMessage:function(e,t){"LOADINGDIALOG_SHOW"==e?(this.rootElement.css("display","block"),glue.postMessage("MASK_SHOW")):"LOADINGDIALOG_HIDE"==e&&(this.rootElement.css("display","none"),glue.postMessage("MASK_HIDE"))}})}),define("./component/mask/Mask",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.mask.Mask",{message:["MASK_SHOW","MASK_HIDE"],onMessage:function(e,t){"MASK_SHOW"==e?this.rootElement.css("display","block"):"MASK_HIDE"==e&&this.rootElement.css("display","none")}})}),define("./component/draw/DrawButton",["../../../lib/glue.min","../../service/user/user","../../service/remote/remote"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/user/user"),o=e("../../service/remote/remote");glue.define("activity.component.draw.DrawButton",{shouldLogin:!0,message:["DRAW_AGAIN"],onMessage:function(e,t){"DRAW_AGAIN"==e&&this.rootElement.attr("data-code-send")==t.code&&(this.rootElement.off("click"),this.handler())},init:function(){var e=this,t=e.rootElement;e._handler=e.handler.bind(e),t.one("click",e._handler)},handler:function(){var e=this,t=e.rootElement;if(e.shouldLogin&&!i.isLogin(t.attr("data-code-send")))return void t.one("click",e._handler);e.execute()},execute:function(){var e=this,t=e.rootElement;glue.postMessage("LOADINGDIALOG_SHOW");var n=t.attr("data-code-send"),i=t.attr("data-code-get");o.send(n,{},function(o){glue.postMessage("LOADINGDIALOG_HIDE"),o.dataCodeSend=n,o.dataCodeGet=i,glue.postMessage("POPUPDIALOG_SHOW",o),t.one("click",e._handler)})}})}),define("./component/draw/Shake",["../../../lib/glue.min","../../service/user/user","../../service/remote/remote"],function(require,exports,module){require("../../../lib/glue.min");var user=require("../../service/user/user"),remote=require("../../service/remote/remote");glue.define("activity.component.draw.Shake",{init:function(){var e=this;if(window.DeviceMotionEvent){var t={callback:function(){if(window.shakeObj.valid&&(window.shakeObj.valid=!1,user.isLogin(e.rootElement.attr("data-code-send")))){glue.postMessage("POPUPDIALOG_REMOVE"),glue.postMessage("LOADINGDIALOG_SHOW");var t=e.rootElement.attr("data-code-send"),n=e.rootElement.attr("data-code-get");remote.send(t,{},function(i){glue.postMessage("LOADINGDIALOG_HIDE"),i.dataCodeSend=t,i.dataCodeGet=n,glue.postMessage("POPUPDIALOG_SHOW",i),setTimeout(function(){window.shakeObj.valid=!0},e.rootElement.attr("data-delay")||3e3)})}},valid:!0};this.setShakeConfig(t),window.shakeObj=t,window.addEventListener("devicemotion",this.deviceMotionHandler,!1)}},setShakeConfig:function(e){e.diff=e.diff||100,e.threshold=e.threshold||3,e.enlarge=e.enlarge||10,e.last_update=0,e.last_x=0,e.last_y=0,e.last_z=0},deviceMotionHandler:function(e){var acceleration=e.accelerationIncludingGravity,curTime=(new Date).getTime();with(window.shakeObj)if(valid&&curTime-last_update>diff){var diffTime=curTime-last_update;last_update=curTime,x=acceleration.x,y=acceleration.y,z=acceleration.z;var speed=Math.abs(x+y+z-last_x-last_y-last_z)/diffTime*enlarge;speed>=threshold&&"function"==typeof callback&&callback(),last_x=x,last_y=y,last_z=z}}})}),define("./component/draw/Turntable",["../../../lib/glue.min","../../service/user/user","../../service/remote/remote","../../service/util/util"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/user/user"),o=e("../../service/remote/remote"),a=e("../../service/util/util");glue.define("activity.component.draw.Turntable",{message:["DRAW_AGAIN"],onMessage:function(e,t){"DRAW_AGAIN"==e&&this.nodes.button.attr("data-code-send")==t.code&&this.handler()},init:function(){var e=this;e.nodes.button&&e.nodes.button.one("click",e.handler.bind(e))},handler:function(){var e=this;if(!i.isLogin(e.nodes.button.attr("data-code-send")))return void e.nodes.button.one("click",e.handler.bind(e));glue.postMessage("LOADINGDIALOG_SHOW");var t=e.nodes.button.attr("data-code-send"),n=e.nodes.button.attr("data-code-get");o.send(t,{},function(i){if(glue.postMessage("LOADINGDIALOG_HIDE"),i.dataCodeSend=t,i.dataCodeGet=n,"A00000"==i.code||"Q00703"==i.code){var o=e.nodes.target.attr("data-level").split(","),a="Q00703"==i.code?"0":i.data.level,r=o.indexOf(a);e.turntableRun({target:e.nodes.target,count:o.length,index:r,callback:function(){glue.postMessage("DRAW_SUCCESS",i),glue.postMessage("POPUPDIALOG_SHOW",i),e.nodes.button.one("click",e.handler.bind(e))}})}else glue.postMessage("POPUPDIALOG_SHOW",i),e.nodes.button.one("click",e.handler.bind(e))})},turntableRun:function(e,t){var n=this;e=e||{};var i=e.target,o=parseInt(e.index),a=parseInt(e.count);if(!(0==i.length||isNaN(o)||isNaN(a)||o>a-1||o<0||a<=0)){var r=e.offset?parseInt(e.offset):360-360*o/a;r>360&&(r=parseInt(r%360));var s=i.prop("lastOffset")||0,l=i.prop("suffix")||0;i.prop("suffix",l+1),t=t||{};s=t.recover?0:s,t.lastOffset=s,i.prop("lastOffset",r),t.offset=r,t.suffix="_"+l,n.setTurntableAnimationConfig(t),setTimeout(function(){i.addClass(t.name)},0),setTimeout(function(){"function"==typeof e.callback&&e.callback()},t.endTime)}},setTurntableAnimationConfig:function(e){var t="h5_turntable",n=a.getStyle(t);t+=e.suffix;var i=e.duration||"5s",o=e.timingFunction||"ease-in-out",r=e.delay||0,s=e.last||500,l=e.offset,d=e.lastOffset,u=e.count||10,c="-webkit-animation-name:"+t+";-webkit-animation-duration:"+i+";-webkit-animation-timing-function:"+o+";-webkit-animation-delay:"+r+";-webkit-animation-iteration-count: 1;-webkit-animation-fill-mode: forwards;",g="0% {-webkit-transform: rotate("+d+"deg)} 100% {-webkit-transform: rotate("+(360*u+l)+"deg)}";a.addRule(n,t,c,g),e.name=t,e.endTime=1e3*parseInt(i)+s}})}),define("./service/util/util",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),n.exports=glue.createService({createStyle:function(e){var t=document.createElement("style");t.setAttribute("title",e),t.setAttribute("type","text/css"),glue.$("head").append(t)},getStyle:function(e){for(var t=document.styleSheets,n=t.length,i=n-1;i>=0;i--){var o=t[i];if(o.title==e)return o}return this.createStyle(e),this.getStyle(e)},addRule:function(e,t,n,i){e.addRule("."+t,n),e.addRule("@-webkit-keyframes "+t,i)},clone:function(e){var t={};for(var n in e)t[n]=e[n];return t}})}),define("./component/draw/DrawPanel",["../../../lib/glue.min","../../service/user/user"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/user/user");glue.define("activity.component.draw.DrawPanel",{message:["DRAW_SUCCESS"],onMessage:function(e,t){"DRAW_SUCCESS"==e&&this.getChance()},init:function(){var e=this;glue.$.cookie.get("P00001")?i.getUserInfo(function(t){null!=t&&t.qiyi_vip_info?e.getSign():(e.nodes.chance.addClass("dn"),e.initStatus())}):(e.nodes.chance.addClass("dn"),e.initStatus())},getSign:function(){var e=this;glue.$.ajax({url:"//act.vip.iqiyi.com/marketing/query/sign/querySignIn.action?P00001="+glue.$.cookie.get("P00001"),dataType:"jsonp",success:function(t){if("A00000"==t.code){var n=t.data.data.continueSignCount;e.initStatus(n),n>0?e.getChance():e.nodes.chance.addClass("dn")}else e.initStatus(),e.nodes.chance.addClass("dn")},error:function(t,n){e.initStatus(),e.nodes.chance.addClass("dn")}})},getChance:function(){var e=this;glue.$.ajax({url:"//act.vip.iqiyi.com/query/lottery/info.action",data:{P00001:glue.$.cookie.get("P00001"),actionCode:e.rootElement.attr("data-actionCode")},dataType:"jsonp",success:function(t){"A00000"==t.code?(e.nodes.chance.removeClass("dn"),e.nodes.drawCount.text(t.data.data.daysurpluschance)):e.nodes.chance.addClass("dn")},error:function(t,n){e.nodes.chance.addClass("dn")}})},initStatus:function(e){e=parseInt(e||-1);var t=e%mod==0?1:0;this.nodes.prizeName.text(prizeName[t]),this.nodes.drawComponent.attr("data-level",dataLevel[t]);var n=prizeArray[t].name,i=prizeArray[t].pic,o=this.nodes.drawComponent.find(".gift-each");o.sort(function(e,t){return parseInt(e.getAttribute("order"))>parseInt(t.getAttribute("order"))?1:-1}),glue.$.each(o,function(e,t){$(t).find("i").css("background-image","url("+i[e]+")"),$(t).find("span").text(n[e])})}})}),define("./component/draw/Speeddial",["../../../lib/glue.min","../../service/user/user","../../service/remote/remote","../../service/util/util"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/user/user"),o=e("../../service/remote/remote");e("../../service/util/util");glue.define("activity.component.draw.Speeddial",{message:["DRAW_AGAIN"],onMessage:function(e,t){"DRAW_AGAIN"==e&&this.nodes.button.attr("data-code-send")==t.code&&this.handler()},
init:function(){var e=this;e.nodes.button&&e.nodes.button.one("click",e.handler.bind(e))},handler:function(){var e=this;if(!i.isLogin(e.nodes.button.attr("data-code-send")))return void e.nodes.button.one("click",e.handler.bind(e));glue.postMessage("LOADINGDIALOG_SHOW");var t=e.nodes.button.attr("data-code-send"),n=e.nodes.button.attr("data-code-get");o.send(t,{},function(i){if(glue.postMessage("LOADINGDIALOG_HIDE"),i.dataCodeSend=t,i.dataCodeGet=n,"A00000"==i.code||"Q00703"==i.code){var o=e.rootElement.attr("data-level").split(","),a="Q00703"==i.code?"0":i.data.level,r=o.indexOf(a);e.speeddialRun({moveCls:"selected",doneCls:"done",target:e.rootElement.find(".gift-each"),count:o.length,index:r,callback:function(){glue.postMessage("DRAW_SUCCESS",i),glue.postMessage("POPUPDIALOG_SHOW",i),e.nodes.button.one("click",e.handler.bind(e))}})}else glue.postMessage("POPUPDIALOG_SHOW",i),e.nodes.button.one("click",e.handler.bind(e))})},speeddialRun:function(e,t){window._lastIndex=window._lastIndex||0;var e=e||{},n=e.target,i=parseInt(e.count),o=parseInt(e.index);if(!(0==n.length||isNaN(i)||isNaN(o)||o<0)){t=t||{},this.setSpeeddialAnimationConfig(t),this.sortSpeeddialItems(n);var a=window._lastIndex;if(t.recover)a=i;else{i-a==i?a=i:a++}var r=i*t.count+o+1+(i-a),s=null;s=t.liner?t.delay:this.getSpeeddialTimeouts(r,t.delay);var l=0;$(n[window._lastIndex]).removeClass(e.moveCls+" "+e.doneCls);for(var d=0;d<r;d++)setTimeout(function(){a>0&&$(n[a-1]).removeClass(e.moveCls),a>i-1&&(a=0),$(n[a++]).addClass(e.moveCls),++l==r&&(a--,$(n[a]).addClass(e.doneCls),window._lastIndex=a,$.isFunction(e.callback)&&setTimeout(function(){e.callback()},t.last))},t.liner?d*s:s[d])}},setSpeeddialAnimationConfig:function(e){e.delay=parseInt(this.rootElement.attr("data-delay")||200),e.count=parseInt(this.rootElement.attr("data-count")||10),e.last=parseInt(this.rootElement.attr("data-last")||500),e.liner="true"==this.rootElement.attr("data-liner")||!1,e.recover="true"==this.rootElement.attr("data-recover")||!1},sortSpeeddialItems:function(e){e.sort(function(e,t){return parseInt(e.getAttribute("order"))>parseInt(t.getAttribute("order"))?1:-1})},getSpeeddialTimeouts:function(e,t){for(var n=Math.floor(e/2),i=(t/e).toFixed(2),o=0,a=[],r=0,s=0,l=[],d=0;d<e;d++)d<n?(o=d*(t-d*i),a.push(o-r),r=o):d==n?(o=r,n%2!=0&&(o=d*(t-d*i),a.push(o-r)),a.push(0),s=a.length):o+=a[s+n-d],l.push(o);return l}})}),define("./component/draw/Slotmachines",["../../../lib/glue.min","../../service/user/user","../../service/remote/remote","../../service/util/util"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/user/user"),o=e("../../service/remote/remote"),a=e("../../service/util/util");glue.define("activity.component.draw.Slotmachines",{message:["DRAW_AGAIN"],onMessage:function(e,t){"DRAW_AGAIN"==e&&this.nodes.button.attr("data-code-send")==t.code&&this.handler()},init:function(){var e=this;e.nodes.button&&e.nodes.button.one("click",e.handler.bind(e))},handler:function(){var e=this;if(!i.isLogin(e.nodes.button.attr("data-code-send")))return void e.nodes.button.one("click",e.handler.bind(e));glue.postMessage("LOADINGDIALOG_SHOW");var t=e.nodes.button.attr("data-code-send"),n=e.nodes.button.attr("data-code-get");o.send(t,{},function(i){if(glue.postMessage("LOADINGDIALOG_HIDE"),i.dataCodeSend=t,i.dataCodeGet=n,"A00000"==i.code||"Q00703"==i.code){var o=e.nodes.target.attr("data-level").split(","),a="Q00703"==i.code?"0":i.data.level,r=o.indexOf(a),s=e.nodes.target.find("[data-item]");e.slotmachinesRun({target:s,count:o.length,index:e.getIdxArray(r,s.length,o.length),callback:function(){glue.postMessage("DRAW_SUCCESS",i),glue.postMessage("POPUPDIALOG_SHOW",i),e.nodes.button.one("click",e.handler.bind(e))}})}else glue.postMessage("POPUPDIALOG_SHOW",i),e.nodes.button.one("click",e.handler.bind(e))})},getIdxArray:function(e,t,n){var i=[];if(e>=0)for(;t--;)i.push(e);else{for(var o=[];n--;)o.push(n);for(;t--;){n=o.length;var e=Math.floor(n*Math.random());i.push(o[e]),o.splice(e,1)}}return i},slotmachinesRun:function(e,t){var n=this;e=e||{};var i=e.target,o=e.index,r=parseInt(e.count);if(!(i.length!=o.length||isNaN(r)||r<=0)){var s=0;$.each(i,function(e,i){i=glue.$(i);var l=o[e],d=i.height(),u=d*r,c=(r-l)*d;c>=u&&(c-=u);var g=i.prop("lastOffset")||0,f=i.prop("suffix")||0;i.prop("suffix",f+1);var p=a.clone(t||{});g=p.recover?0:g,p.lastOffset=g,i.prop("lastOffset",c),p.offset=c,p.suffix="_"+i.attr("id")+"_"+f,p.total=u,n.setSlotmachinesAnimationConfig(p),s=p.endTime+e*p.between,setTimeout(function(){i.addClass(p.name)},e*p.between)}),setTimeout(function(){$.isFunction(e.callback)&&e.callback()},s)}},setSlotmachinesAnimationConfig:function(e){var t="h5_slotmachines",n=a.getStyle(t);t+=e.suffix;var i=e.duration||"5s",o=e.timingFunction||"ease-in-out",r=e.delay||0,s=e.last||500,l=e.offset,d=e.lastOffset,u=e.count||10,c="-webkit-animation-name:"+t+";-webkit-animation-duration:"+i+";-webkit-animation-timing-function:"+o+";-webkit-animation-delay:"+r+";-webkit-animation-iteration-count: 1;-webkit-animation-fill-mode: forwards;",g="0% {background-position-y:"+d+"px} 100% {background-position-y:"+(e.total*u+l)+"px}";a.addRule(n,t,c,g),e.name=t,e.between=e.between||500,e.endTime=1e3*parseInt(i)+s}})}),define("./component/button/InfoButton",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.button.InfoButton",{init:function(){var e=this;e.rootElement.one("click",e.handler.bind(e))},handler:function(){var e=this,t=e.rootElement,n={code:"B00000",dataCodeSend:t.attr("data-code-send"),dataCodeGet:t.attr("data-code-get")};glue.postMessage("POPUPDIALOG_SHOW",n),t.one("click",e.handler.bind(e))}})}),define("./component/button/ChargeButton",["../../../lib/glue.min","../../service/charge/charge"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/charge/charge");glue.define("activity.component.button.ChargeButton",{init:function(){var e=this;e.rootElement.one("click",e.handler.bind(e))},handler:function(){var e=this,t=e.rootElement;i.doCharge(t.attr("data-default-url"),t.attr("data-param")||""),t.one("click",e.handler.bind(e))}})}),define("./component/button/ShareButton",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.button.ShareButton",{init:function(){var e=this,t=e.rootElement;if(navigator.userAgent.toLowerCase().indexOf("iqiyi")<0)return void t.addClass("dn");t.one("click",e.handler.bind(e))},handler:function(){var e=this,t=e.rootElement;e.doShare(t),t.one("click",e.handler.bind(e))},doShare:function(e){var t=navigator.userAgent.toLowerCase();if("iphone"==t.match(/iphone/i)||"ipad"==t.match(/ipad/i)||"android"==t.match(/android/i)){var n=e.attr("glue-share-url")||window.location.href,i=n.split("#");n=i[0]+(i[0].lastIndexOf("?")>=0?"&":"?")+"share=iqiyi"+(i.length>1&&glue.$.trim(i[1]).length>0?"#"+i[1]:"");var o={title:e.attr("glue-share-title")||document.title,text:e.attr("glue-share-content")||document.title,url:n,pic:e.attr("glue-share-image")||glue.$("#wx").attr("src")||"//static.iqiyi.com/common/20151111/h5_default_share.jpg"};o=encodeURIComponent(JSON.stringify(o)),n="iqiyi://share?p=wx&t=1&d="+o,window.location.href=n}}})}),define("./component/button/LoginGroup",["../../../lib/glue.min","../../service/user/user"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/user/user");glue.define("activity.component.button.LoginGroup",{init:function(){var e=this,t=e.nodes.loginTitle,n=e.nodes.loginButton,i=e.nodes.logoutTitle,o=e.nodes.logoutButton,a=e.nodes.backButton;if(window.navigator.userAgent.indexOf("IqiyiApp")>=0)return void e.rootElement.addClass("dn");e.rootElement.removeClass("dn"),n.one("click",e.login.bind(e)),o.one("click",e.logout.bind(e)),a.one("click",e.back.bind(e)),glue.$.cookie.get("P00001")?glue.$.ajax({type:"POST",url:"https://passport.iqiyi.com/apis/user/info.action?authcookie="+glue.$.cookie.get("P00001"),dataType:"json",crossDomain:!0,beforeSend:function(e,t){e.withCredentials=!0},data:window.deviceInfo.qyID||null,success:function(e){if("A00000"==e.code){t.css("display","none"),n.css("display","none");var a="",r=glue.$.cookie.get("P00002");r&&(a+=JSON.parse(r).nickname),i.text(a).css("display","block"),o.css("display","block")}else t.css("display","block"),n.css("display","block"),i.css("display","none"),o.css("display","none")},error:function(e,t){}}):(t.css("display","block"),n.css("display","block"),i.css("display","none"),o.css("display","none"))},login:function(){var e=this;e.nodes.loginButton.one("click",e.login.bind(e)),i.login()},logout:function(){i.logout()},back:function(){window.history.length<=1&&(window.location.href="//m.iqiyi.com/vip/");var e=this;e.nodes.backButton.one("click",e.back.bind(e)),window.history.back()}})}),define("./component/button/ShowAllGroup",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.button.ShowAllGroup",{init:function(){var e=this;e.nodes.showAllButton.one("click",e.handler.bind(e))},handler:function(){var e=this,t=e.rootElement;t.hasClass("ticket_namelist_all")?t.removeClass("ticket_namelist_all"):t.addClass("ticket_namelist_all"),e.nodes.showAllButton.one("click",e.handler.bind(e))}})}),define("./component/carousel/Carousel",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.carousel.Carousel",{init:function(){var e=this,t=e.rootElement;if(t.ul=t.find("li"),t.ul.css({position:"absolute",top:0}),t.ul_length=t.ul.length,t.ul_length<=1)return $(t.ul[0]).css("left","0px"),e.nodes.scrollFocus&&e.nodes.scrollFocus.hide(),(e.nodes.prev_btn&&e.nodes.prev_btn.css("display","none"))&(e.nodes.next_btn&&e.nodes.next_btn.css("display","none"));if(t.ul_width=t.width(),t.ul_index=0,t.lock=!1,t.duration=t.attr("data-duration")||2500,t.animeDuration=t.attr("data-anime-duration")||500,e.nodes.scrollFocus&&(t.scrollFocus=e.nodes.scrollFocus.children()),$(t.ul).css("left",t.ul_width+"px"),$(t.ul[0]).css("left","0px"),$(t.ul[t.ul_length-1]).css("left","-"+t.ul_width+"px"),e.nodes.prev_btn&&e.nodes.prev_btn.on("click",function(){t.lock||e.turnLeft(t)}),e.nodes.next_btn&&e.nodes.next_btn.on("click",function(){t.lock||e.turnRight(t)}),"no"!=t.attr("data-autoplay")){var n=function(){t.lock||e.turnRight(t),setTimeout(n,t.duration)};setTimeout(n,t.duration)}else $(t).on("touchstart",function(e){e.preventDefault()}),$(t).swipeLeft(function(){t.lock||e.turnRight(t)}),$(t).swipeRight(function(){t.lock||e.turnLeft(t)}),t.ul.find("a").on("tap",function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,n=$(t).attr("href");window.location.href=n})},turnLeft:function(e){if(e.lock=!0,e.ul_index=e.ul_index-1+e.ul_length,$(e.ul).css("transition","none"),2===e.ul_length)$(e.ul[e.ul_index%e.ul_length]).css({"z-index":-1,left:"-"+e.ul_width+"px"});else{var t=$(e.ul[(e.ul_index-1)%e.ul_length]);t.css({"z-index":-1}),setTimeout(function(){t.css({left:"-"+e.ul_width+"px"})},100)}$(e.ul[(e.ul_index+1)%e.ul_length]).animate({left:e.ul_width},e.animeDuration),$(e.ul[e.ul_index%e.ul_length]).animate({left:0},{duration:e.animeDuration,complete:function(){$(e.ul).css("z-index",0),e.lock=!1}}),e.ul_index%=e.ul_length,e.scrollFocus&&(e.scrollFocus.removeClass("selected"),e.scrollFocus.eq(e.ul_index).addClass("selected"))},turnRight:function(e){if(e.lock=!0,e.ul_index++,$(e.ul).css("transition","none"),2===e.ul_length)$(e.ul[e.ul_index%e.ul_length]).css({"z-index":-1,left:e.ul_width+"px"});else{var t=$(e.ul[(e.ul_index+1)%e.ul_length]);t.css({"z-index":-1}),setTimeout(function(){t.css({left:e.ul_width+"px"})},100)}$(e.ul[(e.ul_index-1)%e.ul_length]).animate({left:-e.ul_width},e.animeDuration),$(e.ul[e.ul_index%e.ul_length]).animate({left:0},{duration:e.animeDuration,complete:function(){$(e.ul).css("z-index",0),e.lock=!1}}),e.ul_index%=e.ul_length,e.scrollFocus&&(e.scrollFocus.removeClass("selected"),e.scrollFocus.eq(e.ul_index).addClass("selected"))}})}),define("./component/carousel/PictureViewer",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.carousel.PictureViewer",{init:function(){var e=this,t=e.rootElement;t.ul=t.find("ul li"),t.ul_length=t.ul.length,t.ul_index=1,t.lock=!1,t.animeDuration=t.attr("data-anime-duration")||500,e.nodes.picTitle&&(t.picTitles=e.nodes.picTitle.children(),t.picTitles.removeClass("selected"),t.picTitles.eq(1).addClass("selected")),t.ul_length>2&&($(t.ul).each(function(e,n){if(0==e){var i=$(n).width(),o=$(n).position(),a=o.left,r=parseFloat($(n).css("padding-top"));t.leftPosition='"width":'+i+',"padding-top":'+r+',"left":'+a,t.backPosition='"width":'+i+',"padding-top":'+r;var s=JSON.parse("{"+t.leftPosition+',"z-index":2, "transform" : "translate(0, 0)", "-webkit-transform" : "translate(0, 0)"}');$(n).css(s)}else if(1==e){var i=$(n).width(),o=$(n).position(),a=o.left,r=parseFloat($(n).css("padding-top"));t.middlePosition='"width":'+i+',"padding-top":'+r+',"left":'+a,t.backPosition=t.backPosition+',"left":'+a;var s=JSON.parse("{"+t.middlePosition+',"z-index":3, "transform" : "translate(0, 0)", "-webkit-transform" : "translate(0, 0)"}');$(n).css(s)}else if(2==e){var i=$(n).width(),o=$(n).position(),a=o.left,r=parseFloat($(n).css("padding-top"));t.rightPosition='"width":'+i+',"padding-top":'+r+',"left":'+a;var s=JSON.parse("{"+t.rightPosition+',"z-index":2, "transform" : "translate(0, 0)", "-webkit-transform" : "translate(0, 0)"}');$(n).css(s)}else{var s=JSON.parse("{"+t.backPosition+',"z-index":1, "transform" : "translate(0, 0)", "-webkit-transform" : "translate(0, 0)"}');$(n).css(s)}}),$(t).on("touchstart",function(e){e.preventDefault()}),$(t).swipeLeft(function(){t.lock||e.getNext(t)}),$(t).swipeRight(function(){t.lock||e.getPrevious(t)}),t.ul.find("a").on("tap",function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,n=$(t).attr("href");window.location.href=n}))},getPrevious:function(e){var t=e.ul_length;e.lock=!0,$(e.ul[e.ul_index]).css(JSON.parse("{"+e.rightPosition+',"z-index":2, "-webkit-transition" : "all 1s"}')),e.ul_index=(e.ul_index-1+t)%t,$(e.ul[e.ul_index%t]).css(JSON.parse("{"+e.middlePosition+',"z-index":3, "-webkit-transition" : "all 1s"}')),$(e.ul[(e.ul_index+2)%t]).css(JSON.parse("{"+e.backPosition+',"z-index":1, "-webkit-transition" : "all 1s"}')),$(e.ul[(e.ul_index-1+t)%t]).css(JSON.parse("{"+e.leftPosition+',"z-index":2, "-webkit-transition" : "all 1s"}')),e.picTitles&&(e.picTitles.removeClass("selected"),e.picTitles.eq(e.ul_index).addClass("selected")),e.lock=!1},getNext:function(e){var t=e.ul_length;e.lock=!0,$(e.ul[e.ul_index]).css(JSON.parse("{"+e.leftPosition+',"z-index":2, "-webkit-transition" : "all 1s"}')),e.ul_index=(e.ul_index+1)%t,$(e.ul[e.ul_index%t]).css(JSON.parse("{"+e.middlePosition+',"z-index":3, "-webkit-transition" : "all 1s"}')),$(e.ul[(e.ul_index-2+t)%t]).css(JSON.parse("{"+e.backPosition+',"z-index":1, "-webkit-transition" : "all 1s"}')),$(e.ul[(e.ul_index+1)%t]).css(JSON.parse("{"+e.rightPosition+',"z-index":2, "-webkit-transition" : "all 1s"}')),e.picTitles&&(e.picTitles.removeClass("selected"),e.picTitles.eq(e.ul_index).addClass("selected")),e.lock=!1}})}),define("./component/carousel/Prizer",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.carousel.Prizer",{init:function(){var e=this;glue.$.ajax({url:"//act.vip.iqiyi.com/query/gift/win-users.action",data:{actionCode:this.rootElement.attr("data-actionCode"),interfaceCode:this.rootElement.attr("data-interfaceCode")},dataType:"jsonp",success:function(t){"A00000"==t.code?e.render(t.data.data.users):e.render()},error:function(t,n){e.render()}})},render:function(e){e=e||[];var t=e.length;if(0==t)this.nodes.noPrizer.removeClass("dn"),this.nodes.prizer.addClass("dn");else{for(var n=this.nodes.tpl.text(),i="",o=0;o<t;o++){var a=e[o];i+=n.replace("{username}",a.username).replace("{gift}",a.gift)}this.nodes.prizer.append(i),this.nodes.prizer.removeClass("dn"),this.nodes.noPrizer.addClass("dn");t>parseInt(this.nodes.prizer.attr("data-view-count")||4)&&this.animate()}},animate:function(){var e=this,t=e.nodes.prizer.find("li:first"),n=t.height(),i=0;setInterval(function(){i--,t.animate({marginTop:i+"px"},0,function(){Math.abs(parseInt(t.css("margin-top")))>=n&&(t.css("marginTop",0).appendTo(e.nodes.prizer),i=0,t=e.nodes.prizer.find("li:first"))})},50)}})}),define("./component/carousel/CommonPrizer",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.carousel.CommonPrizer",{init:function(){var e=this;glue.$.ajax({url:"//act.vip.iqiyi.com/query/gift/win-users.action",data:{actionCode:this.rootElement.attr("data-actionCode"),interfaceCode:this.rootElement.attr("data-interfaceCode")},dataType:"jsonp",success:function(t){"A00000"==t.code&&e.render(t.data.data.users)}})},render:function(e){e=e||[];var t=e.length;if(t>0){for(var n=parseInt(this.rootElement.attr("data-count")||100),i=this.nodes.tpl.text(),o=[],a=0;a<t&&a<n;a++){var r=e[a];o.push(i.replace("{icon}",r.icon).replace("{username}",r.username).replace("{gift}",r.gift))}this.nodes.prizer.append(o.join("")),n=parseInt(this.nodes.prizer.attr("data-view-count")||3),t>n&&this.animate()}},animate:function(){var e=this,t=(parseInt(e.rootElement.attr("data-animateTime")||500),parseInt(e.rootElement.attr("data-intervalTime")||1500),e.nodes.prizer.find("li:first")),n=t.width(),i=parseInt(t.css("marginLeft")),o=i;setInterval(function(){o-=n,t.animate({marginLeft:o+"px"},500,function(){t.css("marginLeft",i).appendTo(e.nodes.prizer),o=i,t=e.nodes.prizer.find("li:first")})},1500)}})}),define("./component/date/Countdown",["../../../lib/glue.min"],function(e,t,n){e("../../../lib/glue.min"),glue.define("activity.component.date.Countdown",{init:function(){var e=this,t=parseInt(e.rootElement.attr("data-deadline"));if(!(isNaN(t)||(t=(t-(new Date).getTime())/1e3)<=0)){var n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),o=Math.floor(t-3600*n-60*i);e.task=setInterval(function(){if(0==n&&0==i&&0==o)return void clearInterval(e.task);0==o?(o=59,0==i?(i=59,n>0&&n--):i--):o--,e.nodes.hourH.text(Math.floor(n/10)),e.nodes.hourL.text(n%10),e.nodes.minuteH.text(Math.floor(i/10)),e.nodes.minuteL.text(i%10),e.nodes.secondH.text(Math.floor(o/10)),e.nodes.secondL.text(o%10)},1e3)}}})}),define("./component/composite/PhoneForm",["../../../lib/glue.min","../../service/remote/remote","../../service/user/user"],function(e,t,n){e("../../../lib/glue.min");var i=e("../../service/remote/remote"),o=e("../../service/user/user");glue.define("activity.component.composite.PhoneForm",{init:function(){var e=this;o.getUserInfo(function(t){null!=t&&e.rootElement.attr("glue-behavior")&&e.rootElement.attr("glue-behavior").indexOf("activity.behavior.Dialog")>=0&&e.nodes.phone.val(t.userinfo.phone||""),e.nodes.button.on("click",function(){e.submit()})}),e.nodes.clear&&e.nodes.clear.on("click",function(){e.nodes.phone.val("")})},submit:function(){var e=this;this.nodes.error.removeClass("show");var t=this.nodes.phone.val();if(""==t)return this.nodes.error.text("您还没有输入手机号哦"),void this.nodes.error.addClass("show");if(11!=t.length||!t.match(/^1[34578]\d{9}$/))return this.nodes.error.text("您输入的手机号码不正确哦"),void this.nodes.error.addClass("show");var n=this.nodes.button.attr("data-code");i.send({url:"//act.vip.iqiyi.com/api/process-jsonp.action",interfaceCode:n},{mobile:t,uid:t},function(t){t.dataCodeSend=n,glue.postMessage("MASK_HIDE"),glue.postMessage("PhoneFormDialogHide",e.rootElement),glue.postMessage("POPUPDIALOG_SHOW",t)})}})}),define("./behavior/NoLogin",["../../lib/glue.min"],function(e,t,n){e("../../lib/glue.min"),glue.createBehavior("activity.behavior.NoLogin",{init:function(){this.shouldLogin=!1}})}),define("./behavior/Reserve",["../../lib/glue.min"],function(e,t,n){e("../../lib/glue.min"),glue.createBehavior("activity.behavior.Reserve",{init:function(){var e=this;e.shouldLogin=!1;var t=e.rootElement;t.off("click",e._handler),t.on("click",function(){var e=glue.$('[glue-component="activity.component.composite.PhoneForm"][data-target="'+t.attr("data-target")+'"]');glue.postMessage("PhoneFormDialogShow",e)})}})}),define("./behavior/Dialog",["../../lib/glue.min"],function(e,t,n){e("../../lib/glue.min"),glue.createBehavior("activity.behavior.Dialog",{message:["PhoneFormDialogShow","PhoneFormDialogHide"],onMessage:function(e,t){!t.attr("glue-behavior")||t.attr("glue-behavior").indexOf("activity.behavior.Dialog")<0||("PhoneFormDialogShow"==e?t.css("display","block"):"PhoneFormDialogHide"==e&&t.css("display","none"))},init:function(){var e=this;e.rootElement.find("a").on("click",function(t){$(t.target).hasClass("ff-close")&&e.rootElement.css("display","none")})}})});